/*
Copyright (c) 2014 Tobias Schramm

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

#ifndef __NRF24L01_CONSTANTS_H__
#define __NRF24L01_CONSTANTS_H__

	//NRF24L01 constants
	//Registers
	#define NRF24L01_REG_CONFIG					0x00
	#define NRF24L01_REG_EN_AA					0x01
	#define NRF24L01_REG_EN_RXADDR				0x02
	#define NRF24L01_REG_SETUP_AW				0x03
	#define NRF24L01_REG_SETUP_RETR				0x04
	#define NRF24L01_REG_RF_CH					0x05
	#define NRF24L01_REG_RF_SETUP				0x06
	#define NRF24L01_REG_STATUS					0x07
	#define NRF24L01_REG_OBSERVE_TX				0x08
	#define NRF24L01_REG_CD						0x09
	#define NRF24L01_REG_RX_ADDR_P0				0x0A
	#define NRF24L01_REG_RX_ADDR_P1				0x0B
	#define NRF24L01_REG_RX_ADDR_P2				0x0C
	#define NRF24L01_REG_RX_ADDR_P3				0x0D
	#define NRF24L01_REG_RX_ADDR_P4				0x0E
	#define NRF24L01_REG_RX_ADDR_P5				0x0F
	#define NRF24L01_REG_TX_ADDR				0x10
	#define NRF24L01_REG_RX_PW_P0				0x11
	#define NRF24L01_REG_RX_PW_P1				0x12
	#define NRF24L01_REG_RX_PW_P2				0x13
	#define NRF24L01_REG_RX_PW_P3				0x14
	#define NRF24L01_REG_RX_PW_P4				0x15
	#define NRF24L01_REG_RX_PW_P5				0x16
	#define NRF24L01_REG_FIFO_STATUS			0x17
	#define NRF24L01_REG_DYNPD					0x1C
	#define NRF24L01_REG_FEATURE				0x1D

	//Bitmasks
	//Config
	#define NRF24L01_MASK_CONFIG				0b01111111
	#define NRF24L01_MASK_CONFIG_MASK_RX_DR		0b01000000
	#define NRF24L01_MASK_CONFIG_MASK_TX_DS		0b00100000
	#define NRF24L01_MASK_CONFIG_MASK_MAX_RT	0b00010000
	#define NRF24L01_MASK_CONFIG_EN_CRC			0b00001000
	#define NRF24L01_MASK_CONFIG_CRCO			0b00000100
	#define NRF24L01_MASK_CONFIG_PWR_UP			0b00000010
	#define NRF24L01_MASK_CONFIG_PRIM_RX		0b00000001

	//Enhanced ShockBurst
	#define NRF24L01_MASK_EN_AA					0b00111111
	#define NRF24L01_MASK_EN_AA_ENAA_P5			0b00100000
	#define NRF24L01_MASK_EN_AA_ENAA_P4			0b00010000
	#define NRF24L01_MASK_EN_AA_ENAA_P3			0b00001000
	#define NRF24L01_MASK_EN_AA_ENAA_P2			0b00000100
	#define NRF24L01_MASK_EN_AA_ENAA_P1			0b00000010
	#define NRF24L01_MASK_EN_AA_ENAA_P0			0b00000001

	//Enabled RX addresses
	#define NRF24L01_MASK_EN_RXADDR				0b00111111
	#define NRF24L01_MASK_EN_RXADDR_ERX_P5		0b00100000
	#define NRF24L01_MASK_EN_RXADDR_ERX_P4		0b00010000
	#define NRF24L01_MASK_EN_RXADDR_ERX_P3		0b00001000
	#define NRF24L01_MASK_EN_RXADDR_ERX_P2		0b00000100
	#define NRF24L01_MASK_EN_RXADDR_ERX_P1		0b00000010
	#define NRF24L01_MASK_EN_RXADDR_ERX_P0		0b00000001

	//Setup of Address width (common for all pipes)
	#define NRF24L01_MASK_SETUP_AW				0b00000011
	#define NRF24L01_MASK_SETUP_AW_AW			0b00000011

	//Setup of automatic retransmission
	#define NRF24L01_MASK_SETUP_RETR			0b11111111
	#define NRF24L01_MASK_SETUP_RETR_ARD		0b11110000
	#define NRF24L01_MASK_SETUP_RETR_ARC		0b00001111

	//RF channel
	#define NRF24L01_MASK_RF_CH					0b01111111
	#define NRF24L01_MASK_RF_CH_RF_CH			0b01111111

	//RF setup
	#define NRF24L01_MASK_RF_SETUP				0b10111111
	#define NRF24L01_MASK_RF_SETUP_CONT_WAVE	0b10000000
	#define NRF24L01_MASK_RF_SETUP_RF_DR_LOW	0b00100000
	#define NRF24L01_MASK_RF_SETUP_PLL_LOCK		0b00010000
	#define NRF24L01_MASK_RF_SETUP_RF_DR_HIGH	0b00001000
	#define NRF24L01_MASK_RF_SETUP_RF_PWR		0b00000110
	#define NRF24L01_MASK_RF_SETUP_LNA_HCURR	0b00000001

	//Status
	#define NRF24L01_MASK_STATUS				0b01111111
	#define NRF24L01_MASK_STATUS_RX_DR			0b01000000
	#define NRF24L01_MASK_STATUS_TX_DS			0b00100000
	#define NRF24L01_MASK_STATUS_MAX_RT			0b00010000
	#define NRF24L01_MASK_STATUS_RX_P_NO		0b00001110
	#define NRF24L01_MASK_STATUS_TX_FULL		0b00000001

	//Transmit observe register
	#define NRF24L01_MASK_OBSERVE_TX			0b11111111
	#define NRF24L01_MASK_OBSERVE_TX_PLOS_CNT	0b11110000
	#define NRF24L01_MASK_OBSERVE_TX_ARC_CNT	0b00001111

	//Carrier detect
	#define NRF24L01_MASK_CD					0b00000001
	#define NRF24L01_MASK_CD_CD					0b00000001

	//Receive address data pipe 0, 5 bytes LSB first
	#define NRF24L01_MASK_RX_ADDR_P0			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P0_RX_ADDR_P0	0b11111111

	//Receive address data pipe 1, 5 bytes LSB first
	#define NRF24L01_MASK_RX_ADDR_P1			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P1_RX_ADDR_P1	0b11111111

	//Receive address data pipe 2
	#define NRF24L01_MASK_RX_ADDR_P2			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P2_RX_ADDR_P2	0b11111111

	//Receive address data pipe 3
	#define NRF24L01_MASK_RX_ADDR_P3			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P3_RX_ADDR_P3	0b11111111

	//Receive address data pipe 4
	#define NRF24L01_MASK_RX_ADDR_P4			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P4_RX_ADDR_P4	0b11111111

	//Receive address data pipe 5
	#define NRF24L01_MASK_RX_ADDR_P5			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P5_RX_ADDR_P5	0b11111111

	//Transmit address, 5 bytes LSB first
	#define NRF24L01_MASK_TX_ADDR				0b11111111
	#define NRF24L01_MASK_TX_ADDR_TX_ADDR		0b11111111

	//Number of bytes in RX payload in pipe 0
	#define NRF24L01_MASK_RX_PW_P0				0b00111111
	#define NRF24L01_MASK_RX_PW_P0_RX_PW_P0		0b00111111

	//Number of bytes in RX payload in pipe 1
	#define NRF24L01_MASK_RX_PW_P1				0b00111111
	#define NRF24L01_MASK_RX_PW_P1_RX_PW_P1		0b00111111

	//Number of bytes in RX payload in pipe 2
	#define NRF24L01_MASK_RX_PW_P2				0b00111111
	#define NRF24L01_MASK_RX_PW_P2_RX_PW_P2		0b00111111

	//Number of bytes in RX payload in pipe 3
	#define NRF24L01_MASK_RX_PW_P3				0b00111111
	#define NRF24L01_MASK_RX_PW_P3_RX_PW_P3		0b00111111

	//Number of bytes in RX payload in pipe 4
	#define NRF24L01_MASK_RX_PW_P4				0b00111111
	#define NRF24L01_MASK_RX_PW_P4_RX_PW_P4		0b00111111

	//Number of bytes in RX payload in pipe 5
	#define NRF24L01_MASK_RX_PW_P5				0b00111111
	#define NRF24L01_MASK_RX_PW_P5_RX_PW_P5		0b00111111

	//FIFO status register
	#define NRF24L01_MASK_FIFO_STATUS_TX_REUSE	0b01000000
	#define NRF24L01_MASK_FIFO_STATUS_TX_FULL	0b00100000
	#define NRF24L01_MASK_FIFO_STATUS_TX_EMPTY	0b00010000
	#define NRF24L01_MASK_FIFO_STATUS_RX_FULL	0b00000010
	#define NRF24L01_MASK_FIFO_STATUS_RX_EMPTY	0b00000001

	//Enable dynamic payload length
	#define NRF24L01_MASK_DYNPD_DPL_P5			0b00100000
	#define NRF24L01_MASK_DYNPD_DPL_P4			0b00010000
	#define NRF24L01_MASK_DYNPD_DPL_P3			0b00001000
	#define NRF24L01_MASK_DYNPD_DPL_P2			0b00000100
	#define NRF24L01_MASK_DYNPD_DPL_P1			0b00000010
	#define NRF24L01_MASK_DYNPD_DPL_P0			0b00000001

	//Feature register
	#define NRF24L01_MASK_FEATURE_EN_DPL		0b00000100
	#define NRF24L01_MASK_FEATURE_EN_ACK_PAY	0b00000010
	#define NRF24L01_MASK_FEATURE_EN_DYN_ACK	0b00000001

	//SPI commands
	#define NRF24L01_CMD_R_REGISTER				0b00000000
	#define NRF24L01_CMD_W_REGISTER				0b00100000
	#define NRF24L01_CMD_R_RX_PAYLOAD			0b01100001
	#define NRF24L01_CMD_W_TX_PAYLOAD			0b10100000
	#define NRF24L01_CMD_FLUSH_TX				0b11100001
	#define NRF24L01_CMD_FLUSH_RX				0b11100010
	#define NRF24L01_CMD_REUSE_TX_PL			0b11100011
	#define NRF24L01_CMD_ACTIVATE				0b01010000
	#define NRF24L01_CMD_R_RX_PL_WID			0b01100000
	#define NRF24L01_CMD_W_ACK_PAYLOAD			0b10101000
	#define NRF24L01_CMD_W_TX_PAYLOAD_NO_ACK	0b10110000
	#define NRF24L01_CMD_NOP					0b11111111
	//NRF24L01 constants
	//Registers
	#define NRF24L01_REG_CONFIG					0x00
	#define NRF24L01_REG_EN_AA					0x01
	#define NRF24L01_REG_EN_RXADDR				0x02
	#define NRF24L01_REG_SETUP_AW				0x03
	#define NRF24L01_REG_SETUP_RETR				0x04
	#define NRF24L01_REG_RF_CH					0x05
	#define NRF24L01_REG_RF_SETUP				0x06
	#define NRF24L01_REG_STATUS					0x07
	#define NRF24L01_REG_OBSERVE_TX				0x08
	#define NRF24L01_REG_CD						0x09
	#define NRF24L01_REG_RX_ADDR_P0				0x0A
	#define NRF24L01_REG_RX_ADDR_P1				0x0B
	#define NRF24L01_REG_RX_ADDR_P2				0x0C
	#define NRF24L01_REG_RX_ADDR_P3				0x0D
	#define NRF24L01_REG_RX_ADDR_P4				0x0E
	#define NRF24L01_REG_RX_ADDR_P5				0x0F
	#define NRF24L01_REG_TX_ADDR				0x10
	#define NRF24L01_REG_RX_PW_P0				0x11
	#define NRF24L01_REG_RX_PW_P1				0x12
	#define NRF24L01_REG_RX_PW_P2				0x13
	#define NRF24L01_REG_RX_PW_P3				0x14
	#define NRF24L01_REG_RX_PW_P4				0x15
	#define NRF24L01_REG_RX_PW_P5				0x16
	#define NRF24L01_REG_FIFO_STATUS			0x17
	#define NRF24L01_REG_DYNPD					0x1C
	#define NRF24L01_REG_FEATURE				0x1D

	//Bitmasks
	//Config
	#define NRF24L01_MASK_CONFIG				0b01111111
	#define NRF24L01_MASK_CONFIG_MASK_RX_DR		0b01000000
	#define NRF24L01_MASK_CONFIG_MASK_TX_DS		0b00100000
	#define NRF24L01_MASK_CONFIG_MASK_MAX_RT	0b00010000
	#define NRF24L01_MASK_CONFIG_EN_CRC			0b00001000
	#define NRF24L01_MASK_CONFIG_CRCO			0b00000100
	#define NRF24L01_MASK_CONFIG_PWR_UP			0b00000010
	#define NRF24L01_MASK_CONFIG_PRIM_RX		0b00000001

	//Enhanced ShockBurst
	#define NRF24L01_MASK_EN_AA					0b00111111
	#define NRF24L01_MASK_EN_AA_ENAA_P5			0b00100000
	#define NRF24L01_MASK_EN_AA_ENAA_P4			0b00010000
	#define NRF24L01_MASK_EN_AA_ENAA_P3			0b00001000
	#define NRF24L01_MASK_EN_AA_ENAA_P2			0b00000100
	#define NRF24L01_MASK_EN_AA_ENAA_P1			0b00000010
	#define NRF24L01_MASK_EN_AA_ENAA_P0			0b00000001

	//Enabled RX addresses
	#define NRF24L01_MASK_EN_RXADDR				0b00111111
	#define NRF24L01_MASK_EN_RXADDR_ERX_P5		0b00100000
	#define NRF24L01_MASK_EN_RXADDR_ERX_P4		0b00010000
	#define NRF24L01_MASK_EN_RXADDR_ERX_P3		0b00001000
	#define NRF24L01_MASK_EN_RXADDR_ERX_P2		0b00000100
	#define NRF24L01_MASK_EN_RXADDR_ERX_P1		0b00000010
	#define NRF24L01_MASK_EN_RXADDR_ERX_P0		0b00000001

	//Setup of Address width (common for all pipes)
	#define NRF24L01_MASK_SETUP_AW				0b00000011
	#define NRF24L01_MASK_SETUP_AW_AW			0b00000011

	//Setup of automatic retransmission
	#define NRF24L01_MASK_SETUP_RETR			0b11111111
	#define NRF24L01_MASK_SETUP_RETR_ARD		0b11110000
	#define NRF24L01_MASK_SETUP_RETR_ARC		0b00001111

	//RF channel
	#define NRF24L01_MASK_RF_CH					0b01111111
	#define NRF24L01_MASK_RF_CH_RF_CH			0b01111111

	//RF setup
	#define NRF24L01_MASK_RF_SETUP				0b10111111
	#define NRF24L01_MASK_RF_SETUP_CONT_WAVE	0b10000000
	#define NRF24L01_MASK_RF_SETUP_RF_DR_LOW	0b00100000
	#define NRF24L01_MASK_RF_SETUP_PLL_LOCK		0b00010000
	#define NRF24L01_MASK_RF_SETUP_RF_DR_HIGH	0b00001000
	#define NRF24L01_MASK_RF_SETUP_RF_PWR		0b00000110
	#define NRF24L01_MASK_RF_SETUP_LNA_HCURR	0b00000001

	//Status
	#define NRF24L01_MASK_STATUS				0b01111111
	#define NRF24L01_MASK_STATUS_RX_DR			0b01000000
	#define NRF24L01_MASK_STATUS_TX_DS			0b00100000
	#define NRF24L01_MASK_STATUS_MAX_RT			0b00010000
	#define NRF24L01_MASK_STATUS_RX_P_NO		0b00001110
	#define NRF24L01_MASK_STATUS_TX_FULL		0b00000001

	//Transmit observe register
	#define NRF24L01_MASK_OBSERVE_TX			0b11111111
	#define NRF24L01_MASK_OBSERVE_TX_PLOS_CNT	0b11110000
	#define NRF24L01_MASK_OBSERVE_TX_ARC_CNT	0b00001111

	//Carrier detect
	#define NRF24L01_MASK_CD					0b00000001
	#define NRF24L01_MASK_CD_CD					0b00000001

	//Receive address data pipe 0, 5 bytes LSB first
	#define NRF24L01_MASK_RX_ADDR_P0			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P0_RX_ADDR_P0	0b11111111

	//Receive address data pipe 1, 5 bytes LSB first
	#define NRF24L01_MASK_RX_ADDR_P1			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P1_RX_ADDR_P1	0b11111111

	//Receive address data pipe 2
	#define NRF24L01_MASK_RX_ADDR_P2			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P2_RX_ADDR_P2	0b11111111

	//Receive address data pipe 3
	#define NRF24L01_MASK_RX_ADDR_P3			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P3_RX_ADDR_P3	0b11111111

	//Receive address data pipe 4
	#define NRF24L01_MASK_RX_ADDR_P4			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P4_RX_ADDR_P4	0b11111111

	//Receive address data pipe 5
	#define NRF24L01_MASK_RX_ADDR_P5			0b11111111
	#define NRF24L01_MASK_RX_ADDR_P5_RX_ADDR_P5	0b11111111

	//Transmit address, 5 bytes LSB first
	#define NRF24L01_MASK_TX_ADDR				0b11111111
	#define NRF24L01_MASK_TX_ADDR_TX_ADDR		0b11111111

	//Number of bytes in RX payload in pipe 0
	#define NRF24L01_MASK_RX_PW_P0				0b00111111
	#define NRF24L01_MASK_RX_PW_P0_RX_PW_P0		0b00111111

	//Number of bytes in RX payload in pipe 1
	#define NRF24L01_MASK_RX_PW_P1				0b00111111
	#define NRF24L01_MASK_RX_PW_P1_RX_PW_P1		0b00111111

	//Number of bytes in RX payload in pipe 2
	#define NRF24L01_MASK_RX_PW_P2				0b00111111
	#define NRF24L01_MASK_RX_PW_P2_RX_PW_P2		0b00111111

	//Number of bytes in RX payload in pipe 3
	#define NRF24L01_MASK_RX_PW_P3				0b00111111
	#define NRF24L01_MASK_RX_PW_P3_RX_PW_P3		0b00111111

	//Number of bytes in RX payload in pipe 4
	#define NRF24L01_MASK_RX_PW_P4				0b00111111
	#define NRF24L01_MASK_RX_PW_P4_RX_PW_P4		0b00111111

	//Number of bytes in RX payload in pipe 5
	#define NRF24L01_MASK_RX_PW_P5				0b00111111
	#define NRF24L01_MASK_RX_PW_P5_RX_PW_P5		0b00111111

	//FIFO status register
	#define NRF24L01_MASK_FIFO_STATUS_TX_REUSE	0b01000000
	#define NRF24L01_MASK_FIFO_STATUS_TX_FULL	0b00100000
	#define NRF24L01_MASK_FIFO_STATUS_TX_EMPTY	0b00010000
	#define NRF24L01_MASK_FIFO_STATUS_RX_FULL	0b00000010
	#define NRF24L01_MASK_FIFO_STATUS_RX_EMPTY	0b00000001

	//Enable dynamic payload length
	#define NRF24L01_MASK_DYNPD_DPL_P5			0b00100000
	#define NRF24L01_MASK_DYNPD_DPL_P4			0b00010000
	#define NRF24L01_MASK_DYNPD_DPL_P3			0b00001000
	#define NRF24L01_MASK_DYNPD_DPL_P2			0b00000100
	#define NRF24L01_MASK_DYNPD_DPL_P1			0b00000010
	#define NRF24L01_MASK_DYNPD_DPL_P0			0b00000001

	//Feature register
	#define NRF24L01_MASK_FEATURE_EN_DPL		0b00000100
	#define NRF24L01_MASK_FEATURE_EN_ACK_PAY	0b00000010
	#define NRF24L01_MASK_FEATURE_EN_DYN_ACK	0b00000001

	//SPI commands
	#define NRF24L01_CMD_R_REGISTER				0b00000000
	#define NRF24L01_CMD_W_REGISTER				0b00100000
	#define NRF24L01_CMD_R_RX_PAYLOAD			0b01100001
	#define NRF24L01_CMD_W_TX_PAYLOAD			0b10100000
	#define NRF24L01_CMD_FLUSH_TX				0b11100001
	#define NRF24L01_CMD_FLUSH_RX				0b11100010
	#define NRF24L01_CMD_REUSE_TX_PL			0b11100011
	#define NRF24L01_CMD_ACTIVATE				0b01010000
	#define NRF24L01_CMD_R_RX_PL_WID			0b01100000
	#define NRF24L01_CMD_W_ACK_PAYLOAD			0b10101000
	#define NRF24L01_CMD_W_TX_PAYLOAD_NO_ACK	0b10110000
	#define NRF24L01_CMD_NOP					0b11111111

	//NRF24L01(+) constants
	#define NRF24L01_CONST_MAX_PAYLOAD_SIZE 32
	#define NRF24L01_CONST_MIN_PAYLOAD_SIZE	0
	#define NRF24L01_CONST_MAX_CHANNEL		125
	#define NRF24L01_CONST_MIN_CHANNEL		0
	#define NRF24L01_CONST_MIN_ADDR_LEN		1
	#define NRF24L01_CONST_MAX_ADDR_LEN		5

#endif
